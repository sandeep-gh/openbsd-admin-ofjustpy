* Remote deploy command
python3 ~/Development/openbsd-admin-ofjustpy/deploy_site.py ./monallabs.in.webcontent.tgz monallabs ".in" "coreapp"
- Edit /etc/hosts
#+BEGIN_SRC
127.0.0.1       localhost
::1             localhost
127.0.0.1       monallabs.in
#+END_SRC

- unit config probe and set via domin sockets
  #+BEGIN_SRC
  doas  curl  --unix-socket  /var/run/unit/control.sock http://localhost/config/
  
  #+END_SRC
  
  
* The patches
 patch  -p1 </tmp/nxt_python.c.patch

* nginx-unit deployment cmds

tar cvzf webcontent.tgz index.html simpleapp.py  

* Resurgence
- run syspatch post install (and reboot)
- run sysupgrade
- get bootstrap
  ftp -d https://sandeep-gh.github.io/scripts/bootstrap.sh  
- pkg add pkglocatedb
      
** host bootstrap-code on github or on local server

* The architecture
** at remote:
at remote:
python3 remote_work.py

at local:
send remote work:
if everything ok--> then log output
else:
   abort

   


* Building the fullstack
** Phase 1: the bootstrap-bootstrap process
after first install, do
1. syspatch and reboot
2. sysupgrade
3. ftp -d https://sandeep-gh.github.io/scripts/bootstrap.sh     
4. sh bootstrap.sh
   this will create adming account

** Phase 2: bootstrap for clustershell
- call driver.sh
  ./driver.sh 105



build-essential
libncursesw5-dev
libreadline-gplv2-dev
libssl-dev
libgdbm-dev
libc6-dev
libsqlite3-dev
libbz2-dev
libffi-dev

** setup

export PYTHONPATH=./remotescripts:$PYTHONPAT

** TODOs
- ship env.sh
- include env.sh in remote script
- nginx
- unit
- profit
      
  
